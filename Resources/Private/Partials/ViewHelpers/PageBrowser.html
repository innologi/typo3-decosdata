<!-- @TODO ___llang -->
<f:if condition="{renderAbove}">
	<div class="pagebrowser pagebrowser-top">
		<f:render section="pagebrowser" arguments="{configuration: pageBrowser}" />
		<f:if condition="{includeResultCountAbove}">
			<div class="resultcount">Total amount of results: {resultCount}</div>
		</f:if>
	</div>
</f:if>

<f:format.raw>{content}</f:format.raw>

<f:if condition="{renderBelow}">
	<div class="pagebrowser pagebrowser-bottom">
		<f:if condition="{includeResultCountBelow}">
			<div class="resultcount">Total amount of results: {resultCount}</div>
		</f:if>
		<!-- @LOW _how about a caching render VH, that uses a singleton to store/retrieve output per partial+section+arguments hash? It can extend f:render and refer mostly to parent::render -->
		<f:render section="pagebrowser" arguments="{configuration: pageBrowser}" />
	</div>
</f:if>


<!-- @TODO ___what about link titles? -->
<f:section name="pagebrowser">
<ul class="pagebrowser-navigation">
	<f:if condition="{configuration.previousPage}">
		<li class="previous">
			<f:link.action arguments="{page: configuration.previousPage}" addQueryString="TRUE">previous</f:link.action>
		</li>
	</f:if>
	<f:if condition="{configuration.pages.beforeScaled}">
		<f:render section="pagenumbers" arguments="{pages: configuration.pages.beforeScaled}" />
		<li>.....</li>
	</f:if>
	<f:if condition="{configuration.pages.beforeCurrent}">
		<f:render section="pagenumbers" arguments="{pages: configuration.pages.beforeCurrent}" />
	</f:if>
	<li class="current">
		{configuration.currentPage}
	</li>
	<f:if condition="{configuration.pages.afterCurrent}">
		<f:render section="pagenumbers" arguments="{pages: configuration.pages.afterCurrent}" />
	</f:if>
	<f:if condition="{configuration.pages.afterScaled}">
		<li>.....</li>
		<f:render section="pagenumbers" arguments="{pages: configuration.pages.afterScaled}" />
	</f:if>
	<f:if condition="{configuration.nextPage}">
		<li class="next">
			<f:link.action arguments="{page: configuration.nextPage}" addQueryString="TRUE">next</f:link.action>
		</li>
	</f:if>
</ul>
</f:section>

<f:section name="pagenumbers">
<f:for each="{pages}" as="page">
	<li>
		<f:link.action arguments="{page: page}" addQueryString="TRUE">{page}</f:link.action>
	</li>
</f:for>
</f:section>